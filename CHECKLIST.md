# –ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (Migration Checklist)

–≠—Ç–æ—Ç —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ Python/aiohttp —Å—Ç–µ–∫.

## üõ† 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] –°–æ–∑–¥–∞–Ω `requirements.txt` / `pyproject.toml`.
    - [ ] `aiohttp` (web server)
    - [ ] `uvloop` (event loop performance)
    - [ ] `asyncpg` (PostgreSQL driver)
    - [ ] `aiosqlite` (SQLite driver)
    - [ ] `sqlalchemy` (Core –¥–ª—è SQL –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)
    - [ ] `crawl4ai` (Scraping)
    - [ ] `ollama` (AI Client)
    - [ ] `apscheduler` (Scheduler)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω `docker-compose.yml`:
    - [ ] –°–µ—Ä–≤–∏—Å `backend` (Python).
    - [ ] –°–µ—Ä–≤–∏—Å `db` (PostgreSQL).
    - [ ] –°–µ—Ä–≤–∏—Å `ollama` (—Å –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–æ–π –º–æ–¥–µ–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä `llama3` –∏–ª–∏ `mistral`).
    - [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–µ—Ä–≤–∏—Å `browser` –¥–ª—è Crawl4AI (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è remote browser).

## üóÑ 2. –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `DatabaseManager` –∫–ª–∞—Å—Å:
    - [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ DSN —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
    - [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ë–î (sqlite/postgres).
    - [ ] –ú–µ—Ç–æ–¥—ã `connect()`, `disconnect()`, `execute()`, `fetch_all()`.
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã:
    - [ ] SQL —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü (`scouts`, `executions`, `users`...).
    - [ ] –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (seed data).
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (CRUD):
    - [ ] `UserRepository`
    - [ ] `ScoutRepository`
    - [ ] `ExecutionRepository`

## üåê 3. Backend API (aiohttp)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `aiohttp.web.Application`:
    - [ ] Middlewares (CORS, Error Handling, Logging).
    - [ ] Auth Middleware (JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è).
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:
    - [ ] `POST /api/auth/register`
    - [ ] `POST /api/auth/login`
    - [ ] `GET /api/scouts` (—Å–ø–∏—Å–æ–∫)
    - [ ] `POST /api/scouts` (—Å–æ–∑–¥–∞–Ω–∏–µ)
    - [ ] `GET /api/scouts/{id}`
    - [ ] `POST /api/chat` (Websocket –∏–ª–∏ Streaming Response –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞).

## ü§ñ 4. AI –∏ –ê–≥–µ–Ω—Ç (Logic)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è **Ollama**:
    - [ ] –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É Ollama.
    - [ ] –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞–≥–µ–Ω—Ç–∞ (System Prompts).
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è **Crawl4AI**:
    - [ ] –§—É–Ω–∫—Ü–∏—è `scrape_url(url: str) -> str (markdown)`.
    - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤.
- [ ] –õ–æ–≥–∏–∫–∞ **ScoutAgent**:
    - [ ] –ú–µ—Ç–æ–¥ `run(scout_id)`.
    - [ ] –¶–∏–∫–ª "–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ -> –¥–µ–π—Å—Ç–≤–∏–µ -> —Ä–µ–∑—É–ª—å—Ç–∞—Ç".
    - [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∞–º–º–∞—Ä–∏.

## ‚è± 5. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Cron)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `APScheduler` (AsyncIOScheduler).
- [ ] –ó–∞–¥–∞—á–∞ `dispatch_scouts` (–∑–∞–ø—É—Å–∫ —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É).
- [ ] –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ `frequency` (daily/weekly) –∏ `last_run_at`.

## üñ• 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Frontend
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `.env` –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (Next.js):
    - [ ] `NEXT_PUBLIC_API_URL` -> `http://localhost:8000`
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ CORS –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ.

## ‚úÖ 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ë–î (SQLite <-> Postgres).
- [ ] –¢–µ—Å—Ç —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (–ª–æ–∫–∞–ª—å–Ω—ã–π Ollama).
- [ ] –¢–µ—Å—Ç —Å–∫—Ä–∞–ø–∏–Ω–≥–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö.
